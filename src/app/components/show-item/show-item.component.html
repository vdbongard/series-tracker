<ng-container *ngIf="watched && progress && imgPrefix && tmdbShow">
  <img
    [src]="imgPrefix + tmdbShow.poster_path"
    [alt]="tmdbShow.name + ' Poster'"
    class="poster"
    [routerLink]="'/series/' + watched.show.ids.slug"
  />
  <div class="right">
    <div class="title-wrapper">
      <h2 class="title" [routerLink]="'/series/' + watched.show.ids.slug">
        {{ watched.show.title }}
      </h2>
      <button
        *ngIf="favorites.includes(watched.show.ids.trakt)"
        mat-icon-button
        aria-label="Favorite"
        (click)="removeFavorite.emit(watched.show.ids.trakt)"
      >
        <mat-icon>star</mat-icon>
      </button>
      <button
        *ngIf="!favorites.includes(watched.show.ids.trakt)"
        mat-icon-button
        aria-label="Favorite"
        class="favorite-button remove"
        (click)="addFavorite.emit(watched.show.ids.trakt)"
      >
        <mat-icon>star_outline</mat-icon>
      </button>
    </div>

    <mat-progress-bar
      mode="determinate"
      [value]="(progress.completed / progress.aired) * 100"
    ></mat-progress-bar>
    <p>
      Watched {{ progress.completed }} of {{ progress.aired }} episodes ({{
        progress.completed / progress.aired | percent
      }})
    </p>
    <p *ngIf="progress.next_episode">
      Next episode: S{{ progress.next_episode.season }}E{{ progress.next_episode.number }}
      {{ progress.next_episode.title }}
    </p>
    <p *ngIf="!progress.next_episode">No next episode</p>
  </div>
</ng-container>
