<mat-list class="shows">
  <ng-container *ngIf="(isLoadingDelayed | async) === false; else loading">
    <mat-list-item
      *ngFor="let show of shows; trackBy: showId"
      class="show"
      matRipple
      [routerLink]="
        show.show &&
        '/series/s/' +
          show.show.ids.slug +
          (withLinkToEpisode && show.nextEpisode
            ? '/season/' + show.nextEpisode.season + '/episode/' + show.nextEpisode.number
            : '')
      "
    >
      <app-show-item
        [show]="show.show"
        [showWatched]="show.showWatched"
        [progress]="show.showProgress"
        [imgPrefix]="
          tmdbConfig
            ? tmdbConfig.images.secure_base_url + tmdbConfig.images.poster_sizes[1]
            : undefined
        "
        [tmdbShow]="show.tmdbShow"
        [episode]="show.nextEpisode"
        [isFavorite]="show.isFavorite"
        [isWatchlist]="!!show.isWatchlist"
        [withYear]="withYear"
        [withEpisode]="withEpisode"
        [withAddButtons]="withAddButtons"
        [withEpisodesCount]="withEpisodesCount"
        [withProgressbar]="withProgressbar"
        [withMenuButton]="withMenuButton"
        (addFavorite)="addFavorite.emit($event)"
        (removeFavorite)="removeFavorite.emit($event)"
        (addShow)="addShow.emit($event)"
        (removeShow)="removeShow.emit($event)"
        (manageLists)="manageLists.emit($event)"
      ></app-show-item>
    </mat-list-item>
  </ng-container>
</mat-list>

<ng-template #loading>
  <mat-list-item class="loading-item" matRipple>
    <h2 class="mat-title loading-title">Loading...</h2>
  </mat-list-item>
</ng-template>
